# =============================================================================
# DreamTime Configuration
# =============================================================================
# Copy this file to .env and modify as needed
# All values shown are defaults - only override what you need to change

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# DB_TYPE: "sqlite" (default) or "postgresql"
DB_TYPE=sqlite

# DATABASE_URL: Required only when DB_TYPE=postgresql
# Examples:
#   - Local: postgresql://dreamtime:password@localhost:5432/dreamtime
#   - Docker: postgresql://dreamtime:password@host.docker.internal:5432/dreamtime
#   - Remote: postgresql://user:pass@db.example.com:5432/dreamtime
# DATABASE_URL=postgresql://user:password@host:5432/dreamtime

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=80
NODE_ENV=production

# CLIENT_URL: Set this to the URL users access the app from
# This is required for WebAuthn/Face ID to work correctly
# Examples:
#   - http://dreamtime.local
#   - https://dreamtime.yourdomain.com
#   - http://192.168.1.100
CLIENT_URL=http://localhost

# =============================================================================
# DATA STORAGE
# =============================================================================
# Directory for storing secrets and SQLite database
# For Docker, this maps to the container's /app/data
DATA_DIR=./data

# =============================================================================
# AUTHENTICATION (auto-generated if not provided)
# =============================================================================
# JWT secrets are automatically generated on first startup
# and persisted to DATA_DIR/secrets/secrets.json
# Override only if you need specific values:
# JWT_SECRET=your-64-char-secret
# JWT_REFRESH_SECRET=your-64-char-refresh-secret
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# PUSH NOTIFICATIONS (auto-generated if not provided)
# =============================================================================
# VAPID keys are automatically generated on first startup
# Override only if you need specific values:
# VAPID_PUBLIC_KEY=your-vapid-public-key
# VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:admin@dreamtime.app

# =============================================================================
# WEBAUTHN / FACE ID (optional - auto-derived from CLIENT_URL if not set)
# =============================================================================
# Only set these if you need to override the auto-detected values:
# WEBAUTHN_RP_ID=dreamtime.example.com
# WEBAUTHN_ORIGIN=https://dreamtime.example.com

# =============================================================================
# MQTT / HOME ASSISTANT INTEGRATION (optional)
# =============================================================================
# Enable MQTT for Home Assistant voice control via Alexa/Google
# Connects directly to Home Assistant's MQTT broker (Mosquitto add-on)
#
# To enable:
# 1. Install Mosquitto broker add-on in Home Assistant
# 2. Create an MQTT user in Home Assistant (Settings > People > Users)
# 3. Set the values below and restart DreamTime
#
# Topics published:
#   dreamtime/{childId}/state       - Current state: awake, in_crib, asleep, awake_in_crib
#   dreamtime/{childId}/state/json  - Detailed JSON state
#   dreamtime/{childId}/session     - Current session details
#
# Topics subscribed (for voice commands):
#   dreamtime/{childId}/command     - Commands: put_down, asleep, woke_up, out_of_crib, status
#
MQTT_ENABLED=false
MQTT_BROKER_URL=mqtt://homeassistant.local:1883
MQTT_USERNAME=dreamtime
MQTT_PASSWORD=your-mqtt-password
MQTT_TOPIC_PREFIX=dreamtime
